# TypeScript Duplicate Detector 任务规则

这是一个为 TypeScript 重复命名检测工具项目定义自动化任务的文件。当我被要求执行特定任务时，我会参考这里的步骤。

---

## 任务 1: 提交代码

**目标**: 结合本次修改，生成符合项目规范的提交信息，并在确认后提交代码，最后推送到远程分支。

**执行步骤**:

1.  运行 `git status` 和 `git diff HEAD` 分析暂存区和工作区的代码变更。
2.  根据代码变更，并参考 `.cz-config.js` 中定义的类型，使用项目的 Conventional Commits 规范草拟提交信息。格式如下：

    ```
    <type>(<scope>): <subject>

    ### 🚀 变更概述

    [这里填写对变更的简要描述，说明变更的目的和背景。]

    ### 主要变更

    - 🎯 [详细说明第一个主要变更点]
    - 🎯 [详细说明第二个主要变更点]
    - 🎯 [其他相关变更]
    ```

    - **type**: 提交类型 (feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert, wip, deps, patch, minor, major)
    - **scope**: 可选的作用域 (core, cli, detector, config, test, docs, build)
    - **subject**: 简短的变更描述

3.  向用户展示草拟的提交信息，并请求确认。
4.  在用户确认后，执行 `git add .` 将所有更改添加到暂存区。
5.  执行提交命令（推荐使用 `pnpm commit` 进行交互式提交）。
6.  执行 `git push` 将代码推送到当前的远程分支。

---

## 任务 2: 触发 Patch 版本发布

**目标**: 通过提交 patch 类型的 commit 来触发远程 CI 自动发布补丁版本，用于 bug 修复。

**执行步骤**:

1.  运行 `git status --porcelain` 检查是否存在未提交的变更。
2.  如果存在未提交的变更，则提示并执行 **任务 1: 提交代码** 的流程。
3.  向用户确认是否要触发补丁 (Patch) 版本发布。
4.  在用户确认后，手动创建 `patch:` 类型的提交：
    - 选择 "patch: 🔧 补丁版本发布 - 修复 bug"
    - 填写具体的修复内容描述
5.  执行 `git push` 推送到远程仓库。

---

## 任务 3: 触发 Major 版本发布

**目标**: 通过提交 major 类型的 commit 来触发远程 CI 自动发布主版本，用于破坏性变更。

**执行步骤**:

1.  运行 `git status --porcelain` 检查是否存在未提交的变更。
2.  如果存在未提交的变更，则提示并执行 **任务 1: 提交代码** 的流程。
3.  向用户确认是否要触发主 (Major) 版本发布，并提醒这是破坏性变更。
4.  在用户确认后，手动创建 `major:` 类型的提交：
    - 选择 "major: 💥 主要版本发布 (x.0.0) - 破坏性变更"
    - 详细描述破坏性变更内容和迁移指南
5.  执行 `git push` 推送到远程仓库。

---

## 任务 4: 触发 Minor 版本发布

**目标**: 通过提交 minor 类型的 commit 来触发远程 CI 自动发布次版本，用于新功能添加。

**执行步骤**:

1.  运行 `git status --porcelain` 检查是否存在未提交的变更。
2.  如果存在未提交的变更，则提示并执行 **任务 1: 提交代码** 的流程。
3.  向用户确认是否要触发次 (Minor) 版本发布。
4.  在用户确认后，使用 `pnpm commit` 创建 `minor:` 类型的提交：
    - 选择 "minor: 🎯 次要版本发布 (0.x.0) - 新功能，向后兼容"
    - 详细描述新增的功能特性
5.  执行 `git push` 推送到远程仓库。

---
