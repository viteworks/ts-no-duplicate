# TypeScript Duplicate Detector 任务规则

这是一个为 TypeScript 重复命名检测工具项目定义自动化任务的文件。当我被要求执行特定任务时，我会参考这里的步骤。

---

## 任务 1: 提交代码

**目标**: 结合本次修改，生成符合项目规范的提交信息，并在确认后提交代码，最后推送到远程分支。

**执行步骤**:

1.  运行 `git status` 和 `git diff HEAD` 分析暂存区和工作区的代码变更。
2.  根据代码变更，并参考 `.cz-config.js` 中定义的类型，使用项目的 Conventional Commits 规范草拟提交信息。格式如下：

    ```
    <type>(<scope>): <subject>

    ### 🚀 变更概述

    [这里填写对变更的简要描述，说明变更的目的和背景。]

    ### 主要变更

    - 🎯 [详细说明第一个主要变更点]
    - 🎯 [详细说明第二个主要变更点]
    - 🎯 [其他相关变更]
    ```

    - **type**: 提交类型 (feat, fix, docs, style, refactor, perf, test, build, ci, chore, revert, wip, deps, patch, minor, major)
    - **scope**: 可选的作用域 (core, cli, detector, config, test, docs, build)
    - **subject**: 简短的变更描述

3.  向用户展示草拟的提交信息，并请求确认。
4.  在用户确认后，执行 `git add .` 将所有更改添加到暂存区。
5.  执行提交命令（推荐使用 `pnpm commit` 进行交互式提交）。
6.  执行 `git push` 将代码推送到当前的远程分支。

---

## 任务 2: 触发 Patch 版本发布

**目标**: 通过提交 patch 类型的 commit 来触发远程 CI 自动发布补丁版本，用于 bug 修复。

**执行步骤**:

1.  运行 `git status --porcelain` 检查是否存在未提交的变更。
2.  如果存在未提交的变更，则按照任务1的流程分析变更并准备提交，但使用 `patch:` 作为提交类型：
    - 运行 `git status` 和 `git diff HEAD` 分析代码变更
    - 使用以下格式准备提交信息：
      ```
      patch(<scope>): 🔧 <subject>

      ### 🚀 变更概述

      [这里填写对变更的简要描述，说明变更的目的和背景。]

      ### 主要变更

      - 🎯 [详细说明第一个主要变更点]
      - 🎯 [详细说明第二个主要变更点]
      - 🎯 [其他相关变更]
      ```
3.  向用户展示草拟的提交信息，并请求确认。
4.  在用户确认后，执行 `git add .` 将所有更改添加到暂存区。
5.  执行 `git commit -m "提交信息"` 提交代码。
6.  执行 `git push` 推送到远程仓库，触发补丁版本发布。

---

## 任务 3: 触发 Major 版本发布

**目标**: 通过提交 major 类型的 commit 来触发远程 CI 自动发布主版本，用于破坏性变更。

**执行步骤**:

1.  运行 `git status --porcelain` 检查是否存在未提交的变更。
2.  如果存在未提交的变更，则按照任务1的流程分析变更并准备提交，但使用 `major:` 作为提交类型：
    - 运行 `git status` 和 `git diff HEAD` 分析代码变更
    - 使用以下格式准备提交信息：
      ```
      major(<scope>): 💥 <subject>

      ### 🚀 变更概述

      [这里填写对变更的简要描述，说明变更的目的和背景，特别强调这是破坏性变更。]

      ### 主要变更

      - 🎯 [详细说明第一个主要变更点]
      - 🎯 [详细说明第二个主要变更点]
      - 🎯 [其他相关变更]

      ### 迁移指南

      - 🔄 [提供从旧版本迁移到新版本的步骤]
      - 🔄 [说明需要更新的依赖或配置]
      - 🔄 [列出不兼容的API变更]
      ```
3.  向用户展示草拟的提交信息，并请求确认，同时提醒这是破坏性变更。
4.  在用户确认后，执行 `git add .` 将所有更改添加到暂存区。
5.  执行 `git commit -m "提交信息"` 提交代码。
6.  执行 `git push` 推送到远程仓库，触发主版本发布。

---

## 任务 4: 触发 Minor 版本发布

**目标**: 通过提交 minor 类型的 commit 来触发远程 CI 自动发布次版本，用于新功能添加。

**执行步骤**:

1.  运行 `git status --porcelain` 检查是否存在未提交的变更。
2.  如果存在未提交的变更，则按照任务1的流程分析变更并准备提交，但使用 `minor:` 作为提交类型：
    - 运行 `git status` 和 `git diff HEAD` 分析代码变更
    - 使用以下格式准备提交信息：
      ```
      minor(<scope>): 🎯 <subject>

      ### 🚀 变更概述

      [这里填写对变更的简要描述，说明新功能的目的和背景。]

      ### 新增功能

      - ✨ [详细说明第一个新功能]
      - ✨ [详细说明第二个新功能]
      - ✨ [其他相关功能或改进]

      ### 使用示例

      ```typescript
      // 这里可以添加新功能的使用示例代码
      ```
      ```
3.  向用户展示草拟的提交信息，并请求确认。
4.  在用户确认后，执行 `git add .` 将所有更改添加到暂存区。
5.  执行 `git commit -m "提交信息"` 提交代码。
6.  执行 `git push` 推送到远程仓库，触发次版本发布。

---
